<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Interacción con controles Meta Quest</title>
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-physics-system@5.0.0/dist/aframe-physics-system.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/super-hands"></script>
</head>

<body>
    <a-scene webxr="optionalFeatures: hand-tracking" physics="gravity: -9.8">
        <!-- Cámara -->
        <a-camera position="0 1.6 0"></a-camera>

        <!-- Controladores de Meta Quest -->
        <a-entity meta-touch-controls="hand: left" super-hands="maxGrabDistance: 2"
            collision-filter="group: hand; collidesWith: interactivo"></a-entity>
        <a-entity meta-touch-controls="hand: right" super-hands="maxGrabDistance: 2"
            collision-filter="group: hand; collidesWith: interactivo"></a-entity>

        <!-- Cubo interactivo -->
        <a-box id="cubo" position="0 1.5 -0.5" color="red" scale="0.5 0.5 0.5" class="interactivo"
            geometry="primitive: box" dynamic-body grabbable hoverable draggable>
        </a-box>

        <!-- Suelo -->
        <a-plane rotation="-90 0 0" width="10" height="10" color="#ccc" static-body></a-plane>
    </a-scene>

    <script>
        AFRAME.registerComponent('cubito', {
            init: function () {
                const cubo = document.querySelector('#cubo');

                // Detectar cuando el cubo es tocado
                cubo.addEventListener('grab-start', () => {
                    console.log('cubo tocado');
                    cubo.setAttribute('color', 'green');  // Cambiar el color a verde
                });

                // Detectar cuando el cubo deja de ser tocado
                cubo.addEventListener('grab-end', () => {
                    console.log('cubo dejado');
                    cubo.setAttribute('color', 'red');  // Volver a color rojo
                });
            }
        });
    </script>
</body>

</html>

<!--script>
        AFRAME.registerComponent('cubito', {
            init: function () {
                const cubo = document.querySelector('#cubo');

                cubo.addEventListener('raycaster-intersected', () => {
                    console.log('mouseenter');
                    cubo.setAttribute('color', 'green');
                });

                cubo.addEventListener('raycaster-intersected-cleared', () => {
                    console.log('mouseleave');
                    cubo.setAttribute('color', 'red');
                });

                cubo.addEventListener('grab-start', () => {
                    cubo.setAttribute('color', 'blue');
                });

                cubo.addEventListener('grab-end', () => {
                    cubo.setAttribute('color', 'red');
                });
            }
        });
    </script-->
